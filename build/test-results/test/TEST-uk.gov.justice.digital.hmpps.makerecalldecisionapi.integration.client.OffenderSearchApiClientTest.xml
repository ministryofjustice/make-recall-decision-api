<?xml version="1.0" encoding="UTF-8"?>
<testsuite name="uk.gov.justice.digital.hmpps.makerecalldecisionapi.integration.client.OffenderSearchApiClientTest" tests="1" skipped="0" failures="0" errors="0" timestamp="2022-05-12T13:56:05" hostname="Loki-7281" time="0.255">
  <properties/>
  <testcase name="retrieves offender details by crn()" classname="uk.gov.justice.digital.hmpps.makerecalldecisionapi.integration.client.OffenderSearchApiClientTest" time="0.255"/>
  <system-out><![CDATA[2022-05-12 14:56:05.653  INFO 5981 --- [rver-EventLog85] org.mockserver.log.MockServerEventLog    : 8092 started on port: 8092 |  
2022-05-12 14:56:05.686  INFO 5981 --- [rver-EventLog88] org.mockserver.log.MockServerEventLog    : 8093 started on port: 8093 |  
2022-05-12 14:56:05.718  INFO 5981 --- [rver-EventLog91] org.mockserver.log.MockServerEventLog    : 8094 started on port: 8094 |  
2022-05-12 14:56:05.741  INFO 5981 --- [rver-EventLog94] org.mockserver.log.MockServerEventLog    : 9090 started on port: 9090 |  
2022-05-12 14:56:05.745  INFO 5981 --- [    Test worker] .b.t.c.SpringBootTestContextBootstrapper : Neither @ContextConfiguration nor @ContextHierarchy found for test class [uk.gov.justice.digital.hmpps.makerecalldecisionapi.integration.client.OffenderSearchApiClientTest], using SpringBootContextLoader |  
2022-05-12 14:56:05.748  INFO 5981 --- [    Test worker] o.s.t.c.support.AbstractContextLoader    : Could not detect default resource locations for test class [uk.gov.justice.digital.hmpps.makerecalldecisionapi.integration.client.OffenderSearchApiClientTest]: no resource found for suffixes {-context.xml, Context.groovy}. |  
2022-05-12 14:56:05.749  INFO 5981 --- [    Test worker] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [uk.gov.justice.digital.hmpps.makerecalldecisionapi.integration.client.OffenderSearchApiClientTest]: OffenderSearchApiClientTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration. |  
2022-05-12 14:56:05.758  INFO 5981 --- [    Test worker] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration uk.gov.justice.digital.hmpps.makerecalldecisionapi.MakeRecallDecisionApi for test class uk.gov.justice.digital.hmpps.makerecalldecisionapi.integration.client.OffenderSearchApiClientTest |  
2022-05-12 14:56:05.764  INFO 5981 --- [    Test worker] .b.t.c.SpringBootTestContextBootstrapper : Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.event.ApplicationEventsTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener] |  
2022-05-12 14:56:05.766  INFO 5981 --- [    Test worker] .b.t.c.SpringBootTestContextBootstrapper : Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@1660bba7, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@29cd48bd, org.springframework.test.context.event.ApplicationEventsTestExecutionListener@49e3b86b, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@64b262a7, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@771c4015, org.springframework.test.context.support.DirtiesContextTestExecutionListener@34d776eb, org.springframework.test.context.transaction.TransactionalTestExecutionListener@60a3a0fa, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@17734113, org.springframework.test.context.event.EventPublishingTestExecutionListener@27aa700, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@d15f98a, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@704c3ca2, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@7d3a9061, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@2a2f7a61, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener@8d40f07, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@196c8b93] |  
2022-05-12 14:56:05.789  INFO 5981 --- [rver-EventLog85] org.mockserver.log.MockServerEventLog    : 8092 resetting all expectations and request logs |  
2022-05-12 14:56:05.797  INFO 5981 --- [rver-EventLog88] org.mockserver.log.MockServerEventLog    : 8093 resetting all expectations and request logs |  
2022-05-12 14:56:05.810  INFO 5981 --- [rver-EventLog91] org.mockserver.log.MockServerEventLog    : 8094 resetting all expectations and request logs |  
2022-05-12 14:56:05.823  INFO 5981 --- [rver-EventLog94] org.mockserver.log.MockServerEventLog    : 9090 creating expectation:

  {
    "httpRequest" : {
      "path" : "/auth/oauth/token"
    },
    "httpResponse" : {
      "headers" : {
        "content-type" : [ "application/json" ]
      },
      "body" : "{\"access_token\":\"ABCDE\",\"token_type\":\"bearer\"}"
    },
    "id" : "fd6a3ac4-a782-4259-859d-8a1a794d0cd4",
    "priority" : 0,
    "timeToLive" : {
      "unlimited" : true
    },
    "times" : {
      "unlimited" : true
    }
  }

 with id:

  fd6a3ac4-a782-4259-859d-8a1a794d0cd4
 |  
2022-05-12 14:56:05.835  INFO 5981 --- [rver-EventLog94] org.mockserver.log.MockServerEventLog    : 9090 creating expectation:

  {
    "httpRequest" : {
      "path" : "/auth/health/ping"
    },
    "httpResponse" : {
      "headers" : {
        "content-type" : [ "application/json" ]
      },
      "body" : "{\"status\":\"OK\"}"
    },
    "id" : "ea9b56f5-8be4-452c-bd93-aaffba673c65",
    "priority" : 0,
    "timeToLive" : {
      "unlimited" : true
    },
    "times" : {
      "unlimited" : true
    }
  }

 with id:

  ea9b56f5-8be4-452c-bd93-aaffba673c65
 |  
2022-05-12 14:56:05.845  INFO 5981 --- [rver-EventLog85] org.mockserver.log.MockServerEventLog    : 8092 creating expectation:

  {
    "httpRequest" : {
      "path" : "/ping"
    },
    "httpResponse" : {
      "headers" : {
        "content-type" : [ "application/json" ]
      },
      "body" : "{\"status\":\"OK\"}"
    },
    "id" : "485cb8f4-4e51-4c17-a787-403d3590010a",
    "priority" : 0,
    "timeToLive" : {
      "unlimited" : true
    },
    "times" : {
      "unlimited" : true
    }
  }

 with id:

  485cb8f4-4e51-4c17-a787-403d3590010a
 |  
2022-05-12 14:56:05.856  INFO 5981 --- [rver-EventLog88] org.mockserver.log.MockServerEventLog    : 8093 creating expectation:

  {
    "httpRequest" : {
      "path" : "/health/ping"
    },
    "httpResponse" : {
      "headers" : {
        "content-type" : [ "application/json" ]
      },
      "body" : "{\"status\":\"OK\"}"
    },
    "id" : "a1e33e62-a81e-425a-8098-23af5b878d0e",
    "priority" : 0,
    "timeToLive" : {
      "unlimited" : true
    },
    "times" : {
      "unlimited" : true
    }
  }

 with id:

  a1e33e62-a81e-425a-8098-23af5b878d0e
 |  
2022-05-12 14:56:05.882  INFO 5981 --- [rver-EventLog91] org.mockserver.log.MockServerEventLog    : 8094 creating expectation:

  {
    "httpRequest" : {
      "path" : "/health"
    },
    "httpResponse" : {
      "headers" : {
        "content-type" : [ "application/json" ]
      },
      "body" : "{\"status\":\"up\"}"
    },
    "id" : "f016f393-aa26-440d-a1cf-0e585a747387",
    "priority" : 0,
    "timeToLive" : {
      "unlimited" : true
    },
    "times" : {
      "unlimited" : true
    }
  }

 with id:

  f016f393-aa26-440d-a1cf-0e585a747387
 |  
2022-05-12 14:56:05.899  INFO 5981 --- [rver-EventLog88] org.mockserver.log.MockServerEventLog    : 8093 creating expectation:

  {
    "httpRequest" : {
      "path" : "/phrase",
      "queryStringParameters" : {
        "paged" : [ "false" ]
      }
    },
    "httpResponse" : {
      "headers" : {
        "content-type" : [ "application/json" ]
      },
      "body" : "{\n  \"content\": [\n    {\n      \"firstName\": \"Pontius\",\n      \"surname\": \"Pilate\",\n      \"dateOfBirth\": \"2000-11-09\"\n    }\n  ]\n}"
    },
    "id" : "a4c5c7d1-2d6b-4a7c-9f74-838d01bf520c",
    "priority" : 0,
    "timeToLive" : {
      "unlimited" : true
    },
    "times" : {
      "remainingTimes" : 1
    }
  }

 with id:

  a4c5c7d1-2d6b-4a7c-9f74-838d01bf520c
 |  
2022-05-12 14:56:05.916  INFO 5981 --- [rver-EventLog94] org.mockserver.log.MockServerEventLog    : 9090 received request:

  {
    "method" : "POST",
    "path" : "/auth/oauth/token",
    "headers" : {
      "content-length" : [ "29" ],
      "User-Agent" : [ "Java/17.0.2" ],
      "Host" : [ "localhost:9090" ],
      "Content-Type" : [ "application/x-www-form-urlencoded;charset=UTF-8" ],
      "Connection" : [ "keep-alive" ],
      "Authorization" : [ "Basic bWFrZS1yZWNhbGwtZGVjaXNpb24tYXBpOmNsaWVudHNlY3JldA==" ],
      "Accept" : [ "application/json;charset=UTF-8" ]
    },
    "keepAlive" : true,
    "secure" : false,
    "body" : "grant_type=client_credentials"
  }
 |  
2022-05-12 14:56:05.917  INFO 5981 --- [rver-EventLog94] org.mockserver.log.MockServerEventLog    : 9090 request:

  {
    "method" : "POST",
    "path" : "/auth/oauth/token",
    "headers" : {
      "content-length" : [ "29" ],
      "User-Agent" : [ "Java/17.0.2" ],
      "Host" : [ "localhost:9090" ],
      "Content-Type" : [ "application/x-www-form-urlencoded;charset=UTF-8" ],
      "Connection" : [ "keep-alive" ],
      "Authorization" : [ "Basic bWFrZS1yZWNhbGwtZGVjaXNpb24tYXBpOmNsaWVudHNlY3JldA==" ],
      "Accept" : [ "application/json;charset=UTF-8" ]
    },
    "keepAlive" : true,
    "secure" : false,
    "body" : "grant_type=client_credentials"
  }

 matched expectation:

  {
    "httpRequest" : {
      "path" : "/auth/oauth/token"
    },
    "httpResponse" : {
      "headers" : {
        "content-type" : [ "application/json" ]
      },
      "body" : "{\"access_token\":\"ABCDE\",\"token_type\":\"bearer\"}"
    },
    "id" : "fd6a3ac4-a782-4259-859d-8a1a794d0cd4",
    "priority" : 0,
    "timeToLive" : {
      "unlimited" : true
    },
    "times" : {
      "unlimited" : true
    }
  }
 |  
2022-05-12 14:56:05.918  INFO 5981 --- [rver-EventLog94] org.mockserver.log.MockServerEventLog    : 9090 returning response:

  {
    "headers" : {
      "content-type" : [ "application/json" ]
    },
    "body" : "{\"access_token\":\"ABCDE\",\"token_type\":\"bearer\"}"
  }

 for request:

  {
    "method" : "POST",
    "path" : "/auth/oauth/token",
    "headers" : {
      "content-length" : [ "29" ],
      "User-Agent" : [ "Java/17.0.2" ],
      "Host" : [ "localhost:9090" ],
      "Content-Type" : [ "application/x-www-form-urlencoded;charset=UTF-8" ],
      "Connection" : [ "keep-alive" ],
      "Authorization" : [ "Basic bWFrZS1yZWNhbGwtZGVjaXNpb24tYXBpOmNsaWVudHNlY3JldA==" ],
      "Accept" : [ "application/json;charset=UTF-8" ]
    },
    "keepAlive" : true,
    "secure" : false,
    "body" : "grant_type=client_credentials"
  }

 for action:

  {
    "headers" : {
      "content-type" : [ "application/json" ]
    },
    "body" : "{\"access_token\":\"ABCDE\",\"token_type\":\"bearer\"}"
  }

 from expectation:

  fd6a3ac4-a782-4259-859d-8a1a794d0cd4
 |  
2022-05-12 14:56:05.971  INFO 5981 --- [rver-EventLog88] org.mockserver.log.MockServerEventLog    : 8093 received request:

  {
    "method" : "POST",
    "path" : "/phrase",
    "queryStringParameters" : {
      "paged" : [ "false" ]
    },
    "headers" : {
      "user-agent" : [ "ReactorNetty/1.0.18" ],
      "host" : [ "localhost:8093" ],
      "content-length" : [ "42" ],
      "accept-encoding" : [ "gzip" ],
      "accept" : [ "*/*" ],
      "Content-Type" : [ "application/json" ],
      "Authorization" : [ "Bearer ABCDE" ]
    },
    "keepAlive" : true,
    "secure" : false,
    "body" : {
      "phrase" : "X123456",
      "matchAllTerms" : false
    }
  }
 |  
2022-05-12 14:56:05.975  INFO 5981 --- [rver-EventLog88] org.mockserver.log.MockServerEventLog    : 8093 request:

  {
    "method" : "POST",
    "path" : "/phrase",
    "queryStringParameters" : {
      "paged" : [ "false" ]
    },
    "headers" : {
      "user-agent" : [ "ReactorNetty/1.0.18" ],
      "host" : [ "localhost:8093" ],
      "content-length" : [ "42" ],
      "accept-encoding" : [ "gzip" ],
      "accept" : [ "*/*" ],
      "Content-Type" : [ "application/json" ],
      "Authorization" : [ "Bearer ABCDE" ]
    },
    "keepAlive" : true,
    "secure" : false,
    "body" : {
      "phrase" : "X123456",
      "matchAllTerms" : false
    }
  }

 didn't match expectation:

  {
    "httpRequest" : {
      "path" : "/health/ping"
    },
    "httpResponse" : {
      "headers" : {
        "content-type" : [ "application/json" ]
      },
      "body" : "{\"status\":\"OK\"}"
    },
    "id" : "a1e33e62-a81e-425a-8098-23af5b878d0e",
    "priority" : 0,
    "timeToLive" : {
      "unlimited" : true
    },
    "times" : {
      "unlimited" : true
    }
  }

 because:

  method matched
  path didn't match
 |  
2022-05-12 14:56:05.994  INFO 5981 --- [rver-EventLog88] org.mockserver.log.MockServerEventLog    : 8093 request:

  {
    "method" : "POST",
    "path" : "/phrase",
    "queryStringParameters" : {
      "paged" : [ "false" ]
    },
    "headers" : {
      "user-agent" : [ "ReactorNetty/1.0.18" ],
      "host" : [ "localhost:8093" ],
      "content-length" : [ "42" ],
      "accept-encoding" : [ "gzip" ],
      "accept" : [ "*/*" ],
      "Content-Type" : [ "application/json" ],
      "Authorization" : [ "Bearer ABCDE" ]
    },
    "keepAlive" : true,
    "secure" : false,
    "body" : {
      "phrase" : "X123456",
      "matchAllTerms" : false
    }
  }

 matched expectation:

  {
    "httpRequest" : {
      "path" : "/phrase",
      "queryStringParameters" : {
        "paged" : [ "false" ]
      }
    },
    "httpResponse" : {
      "headers" : {
        "content-type" : [ "application/json" ]
      },
      "body" : "{\n  \"content\": [\n    {\n      \"firstName\": \"Pontius\",\n      \"surname\": \"Pilate\",\n      \"dateOfBirth\": \"2000-11-09\"\n    }\n  ]\n}"
    },
    "id" : "a4c5c7d1-2d6b-4a7c-9f74-838d01bf520c",
    "priority" : 0,
    "timeToLive" : {
      "unlimited" : true
    },
    "times" : {
      "remainingTimes" : 1
    }
  }
 |  
2022-05-12 14:56:06.005  INFO 5981 --- [rver-EventLog88] org.mockserver.log.MockServerEventLog    : 8093 returning response:

  {
    "headers" : {
      "content-type" : [ "application/json" ]
    },
    "body" : "{\n  \"content\": [\n    {\n      \"firstName\": \"Pontius\",\n      \"surname\": \"Pilate\",\n      \"dateOfBirth\": \"2000-11-09\"\n    }\n  ]\n}"
  }

 for request:

  {
    "method" : "POST",
    "path" : "/phrase",
    "queryStringParameters" : {
      "paged" : [ "false" ]
    },
    "headers" : {
      "user-agent" : [ "ReactorNetty/1.0.18" ],
      "host" : [ "localhost:8093" ],
      "content-length" : [ "42" ],
      "accept-encoding" : [ "gzip" ],
      "accept" : [ "*/*" ],
      "Content-Type" : [ "application/json" ],
      "Authorization" : [ "Bearer ABCDE" ]
    },
    "keepAlive" : true,
    "secure" : false,
    "body" : {
      "phrase" : "X123456",
      "matchAllTerms" : false
    }
  }

 for action:

  {
    "headers" : {
      "content-type" : [ "application/json" ]
    },
    "body" : "{\n  \"content\": [\n    {\n      \"firstName\": \"Pontius\",\n      \"surname\": \"Pilate\",\n      \"dateOfBirth\": \"2000-11-09\"\n    }\n  ]\n}"
  }

 from expectation:

  a4c5c7d1-2d6b-4a7c-9f74-838d01bf520c
 |  
2022-05-12 14:56:06.005  INFO 5981 --- [rver-EventLog88] org.mockserver.log.MockServerEventLog    : 8093 removed expectation:

  {
    "httpRequest" : {
      "path" : "/phrase",
      "queryStringParameters" : {
        "paged" : [ "false" ]
      }
    },
    "httpResponse" : {
      "headers" : {
        "content-type" : [ "application/json" ]
      },
      "body" : "{\n  \"content\": [\n    {\n      \"firstName\": \"Pontius\",\n      \"surname\": \"Pilate\",\n      \"dateOfBirth\": \"2000-11-09\"\n    }\n  ]\n}"
    },
    "id" : "a4c5c7d1-2d6b-4a7c-9f74-838d01bf520c",
    "priority" : 0,
    "timeToLive" : {
      "unlimited" : true
    },
    "times" : {
      "remainingTimes" : 0
    }
  }

 with id:

  a4c5c7d1-2d6b-4a7c-9f74-838d01bf520c
 |  
2022-05-12 14:56:06.039  INFO 5981 --- [rver-EventLog85] org.mockserver.log.MockServerEventLog    : 9090 stopped for port: 8092 |  
2022-05-12 14:56:06.159  INFO 5981 --- [rver-EventLog88] org.mockserver.log.MockServerEventLog    : 9090 stopped for port: 8093 |  
2022-05-12 14:56:06.277  INFO 5981 --- [rver-EventLog91] org.mockserver.log.MockServerEventLog    : 9090 stopped for port: 8094 |  
2022-05-12 14:56:06.400  INFO 5981 --- [rver-EventLog94] org.mockserver.log.MockServerEventLog    : 9090 stopped for port: 9090 |  
]]></system-out>
  <system-err><![CDATA[]]></system-err>
</testsuite>
